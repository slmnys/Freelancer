{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport api from '../utils/axios';\nexport function useMessages(projectId) {\n  _s();\n  const queryClient = useQueryClient();\n  const {\n    data: messages,\n    isLoading\n  } = useQuery({\n    queryKey: ['messages', projectId],\n    queryFn: () => api.get(`/messages/project/${projectId}`).then(res => res.data.data)\n  });\n  const sendMessage = useMutation({\n    mutationFn: content => api.post('/messages/send', {\n      project_id: projectId,\n      content,\n      receiver_id: recipientId\n    }).then(res => res.data.data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({\n        queryKey: ['messages', projectId]\n      });\n    }\n  });\n  const handleSendMessage = (content, options) => {\n    sendMessage.mutate(content, {\n      onSuccess: () => {\n        var _options$onSuccess;\n        options === null || options === void 0 ? void 0 : (_options$onSuccess = options.onSuccess) === null || _options$onSuccess === void 0 ? void 0 : _options$onSuccess.call(options);\n      }\n    });\n  };\n  return {\n    messages,\n    isLoading,\n    sendMessage: handleSendMessage\n  };\n}\n_s(useMessages, \"4tBwuwAnxCQmvLg+SQmm9ValFno=\", false, function () {\n  return [useQueryClient, useQuery, useMutation];\n});","map":{"version":3,"names":["useQuery","useMutation","useQueryClient","api","useMessages","projectId","_s","queryClient","data","messages","isLoading","queryKey","queryFn","get","then","res","sendMessage","mutationFn","content","post","project_id","receiver_id","recipientId","onSuccess","invalidateQueries","handleSendMessage","options","mutate","_options$onSuccess","call"],"sources":["C:/Users/suleymanyasar/Desktop/çalışmalar/cursor2/frontend/src/hooks/useMessages.ts"],"sourcesContent":["import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport api from '../utils/axios';\r\n\r\ninterface Message {\r\n    _id: string;\r\n    conversation_id: number;\r\n    sender: {\r\n        _id: string;\r\n        name: string;\r\n        email: string;\r\n    };\r\n    receiver_id: number;\r\n    content: string;\r\n    project_id: number;\r\n    status: 'sent' | 'delivered' | 'read';\r\n    read: boolean;\r\n    createdAt: string;\r\n}\r\n\r\ninterface SendMessageOptions {\r\n    onSuccess?: () => void;\r\n}\r\n\r\nexport function useMessages(projectId: string) {\r\n    const queryClient = useQueryClient();\r\n\r\n    const { data: messages, isLoading } = useQuery<Message[]>({\r\n        queryKey: ['messages', projectId],\r\n        queryFn: () => api.get(`/messages/project/${projectId}`).then(res => res.data.data)\r\n    });\r\n\r\n    const sendMessage = useMutation<Message, Error, string, unknown>({\r\n        mutationFn: (content: string) => \r\n            api.post('/messages/send', {\r\n                project_id: projectId,\r\n                content,\r\n                receiver_id: recipientId\r\n            }).then(res => res.data.data),\r\n        onSuccess: () => {\r\n            queryClient.invalidateQueries({ queryKey: ['messages', projectId] });\r\n        }\r\n    });\r\n\r\n    const handleSendMessage = (content: string, options?: SendMessageOptions) => {\r\n        sendMessage.mutate(content, {\r\n            onSuccess: () => {\r\n                options?.onSuccess?.();\r\n            }\r\n        });\r\n    };\r\n\r\n    return {\r\n        messages,\r\n        isLoading,\r\n        sendMessage: handleSendMessage\r\n    };\r\n} "],"mappings":";AAAA,SAASA,QAAQ,EAAEC,WAAW,EAAEC,cAAc,QAAQ,uBAAuB;AAC7E,OAAOC,GAAG,MAAM,gBAAgB;AAsBhC,OAAO,SAASC,WAAWA,CAACC,SAAiB,EAAE;EAAAC,EAAA;EAC3C,MAAMC,WAAW,GAAGL,cAAc,CAAC,CAAC;EAEpC,MAAM;IAAEM,IAAI,EAAEC,QAAQ;IAAEC;EAAU,CAAC,GAAGV,QAAQ,CAAY;IACtDW,QAAQ,EAAE,CAAC,UAAU,EAAEN,SAAS,CAAC;IACjCO,OAAO,EAAEA,CAAA,KAAMT,GAAG,CAACU,GAAG,CAAC,qBAAqBR,SAAS,EAAE,CAAC,CAACS,IAAI,CAACC,GAAG,IAAIA,GAAG,CAACP,IAAI,CAACA,IAAI;EACtF,CAAC,CAAC;EAEF,MAAMQ,WAAW,GAAGf,WAAW,CAAkC;IAC7DgB,UAAU,EAAGC,OAAe,IACxBf,GAAG,CAACgB,IAAI,CAAC,gBAAgB,EAAE;MACvBC,UAAU,EAAEf,SAAS;MACrBa,OAAO;MACPG,WAAW,EAAEC;IACjB,CAAC,CAAC,CAACR,IAAI,CAACC,GAAG,IAAIA,GAAG,CAACP,IAAI,CAACA,IAAI,CAAC;IACjCe,SAAS,EAAEA,CAAA,KAAM;MACbhB,WAAW,CAACiB,iBAAiB,CAAC;QAAEb,QAAQ,EAAE,CAAC,UAAU,EAAEN,SAAS;MAAE,CAAC,CAAC;IACxE;EACJ,CAAC,CAAC;EAEF,MAAMoB,iBAAiB,GAAGA,CAACP,OAAe,EAAEQ,OAA4B,KAAK;IACzEV,WAAW,CAACW,MAAM,CAACT,OAAO,EAAE;MACxBK,SAAS,EAAEA,CAAA,KAAM;QAAA,IAAAK,kBAAA;QACbF,OAAO,aAAPA,OAAO,wBAAAE,kBAAA,GAAPF,OAAO,CAAEH,SAAS,cAAAK,kBAAA,uBAAlBA,kBAAA,CAAAC,IAAA,CAAAH,OAAqB,CAAC;MAC1B;IACJ,CAAC,CAAC;EACN,CAAC;EAED,OAAO;IACHjB,QAAQ;IACRC,SAAS;IACTM,WAAW,EAAES;EACjB,CAAC;AACL;AAACnB,EAAA,CAjCeF,WAAW;EAAA,QACHF,cAAc,EAEIF,QAAQ,EAK1BC,WAAW;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}